<html>
<head>
<title>WebSocket</title>

<style>
 html,body{font:normal 0.9em arial,helvetica;}
 #log {width:440px; height:200px; border:1px solid #7F9DB9; overflow:auto;}
 #msg {width:330px;}
</style>

<script>
if(typeof(EventSource) !== "undefined") {
    // Yes! Server-sent events support!
    // Some code.....
    //var source = new EventSource("http://devapi.coinnoon.com/socket/sse.php");
    //source.onmessage = function(event) {
    //    document.getElementById("result").innerHTML += event.data + "<br>";
    //};
var evtSource = new EventSource("http://devapi.coinnoon.com/socket/sse.php");
evtSource.onmessage = function(e) {
  //var newElement = document.createElement("li");
  
  //newElement.innerHTML = "message: " + e.data;
  document.getElementById("result").innerHTML = "message: " + e.data;
  //eventList.appendChild(newElement);
}
evtSource.addEventListener("ping", function(e) {
  //var newElement = document.createElement("li");

  var obj = JSON.parse(e.data);
  //newElement.innerHTML = "ping at " + obj.time;
  document.getElementById("result").innerHTML = "ping at " + obj.time;
  //eventList.appendChild(newElement);
}, false);
} else {
    // Sorry! No server-sent events support..
}
</script>

</head>
<body>
<div id="result"></div>
 <h3>WebSocket v2.00</h3>
 <div id="log"></div>
 <input id="msg" type="textbox" onkeypress="onkey(event)"/>
 <button onclick="send()">Send</button>
 <button onclick="quit()">Quit</button>
 <div>Commands: hello, hi, name, age, date, time, thanks, bye</div>
</body>
</html>

